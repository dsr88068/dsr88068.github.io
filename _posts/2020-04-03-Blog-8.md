---
title: Blog 8
layout: post
category: Blog
toc_level: 1
date: 2020-04-03
---
This week blog I am going to show you how to create an AWS IAM User using Terraform.
First you are going to need to  install terrafrom  which can be found here : https://www.terraform.io/downloads.html

Second you are going to need to intasll AWS  CLI which can be found here: https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html 

Atter both of these CLI have been installed on your local machine , you are going to create a Root IAM user to use for the AWS CLI configuration file. This file will be set to the deafult profile.  
 The comammnd would be :
 
 $ aws configure 
 
 Then the it will ask for the follwing : 
 
AWS Access Key ID [None]: accesskey
AWS Secret Access Key [None]: secretkey
Default region name [None]: us-west-2
Default output format [None]:

 All the information can filled above from the inforamtion given to you when the IAM user was created.
 
Now we will be able to create our terraform file. You will be creating the terraform file  the same directory where you had intsalled your terraform . Then you can create a basic file but have the name og the file be XXXXXX.tf  . As long as the name of the file ends in .tf then terraform will be able to to recognize.Now that we have created the file terrafrom file  we will add some content to it and to add content you can use notepad or any other editor to do this. The add the following code:

provider "aws" {
  profile = "default" # Deafult proifile used for AWS CLI configuration file
  region     = "us-west-2"
}

data "aws_iam_policy" "admin" {
arn = "arn:aws:iam::aws:policy/AdministratorAccess" #  This is the ARN PLoicy for Admin access that AWS uses
}


resource "aws_iam_user" "Guest" {
  name = "Guest"  # The name of the IAM user
}

resource "aws_iam_access_key" "Guest" {
  user    = "${aws_iam_user.Guest.name}" # The Access key that will be assigned to the this user
}


resource "aws_iam_user_policy_attachment" "attach" {
  user       = "${aws_iam_user.Guest.name}"
  policy_arn = "${data.aws_iam_policy.admin.arn}"  # This will assign the plociy that you  want to use to the user that will be created
}

output "secret" {
  value = "${aws_iam_access_key.Guest.encrypted_secret}"  # This will output the the secert key that has been assigned to the new user into a file that is created  after terrrafrom has been ran
}
 
Once you are done you are going to save the file and then  run the follwing commands:
$Terraform init
$Terraform plan
$Terraform apply

Then you will check your AWS account you will see a new IAM user named Guest has been created.
 
